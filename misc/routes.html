<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portugal Trip Map</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fdfcf9; }
        h1, h2, h3 { font-family: 'Lora', serif; }
        #map-container { position: relative; }
        #map { height: 80vh; width: 100%; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .map-controls { position: absolute; top: 1rem; right: 1rem; background-color: white; padding: 0.75rem; border-radius: 0.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.15); z-index: 10; }
        .control-group { margin-bottom: 0.5rem; }
        .control-group h4 { font-weight: bold; margin-bottom: 0.25rem; font-family: 'Inter', sans-serif; font-size: 0.875rem; }
        .control-group label { display: flex; align-items: center; font-size: 0.875rem; cursor: pointer; }
        .legend i { width: 18px; height: 4px; display: inline-block; margin-right: 8px; vertical-align: middle; }
    </style>
</head>
<body class="bg-amber-50 text-stone-700">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-stone-800">Your Portugal Journey Map</h1>
            <p class="text-lg text-stone-600 mt-2">An interactive overview of your hotels, concerts, and travel routes.</p>
        </header>

        <div id="map-container">
            <div id="map"></div>
            <div class="map-controls">
                <div class="control-group">
                    <h4>Show on Map</h4>
                    <label><input type="checkbox" id="toggle-hotels" class="mr-2" checked> 游낃 Hotels</label>
                    <label><input type="checkbox" id="toggle-concerts" class="mr-2" checked> 游꿭 Concerts</label>
                    <label><input type="checkbox" id="toggle-routes" class="mr-2" checked> 游뚧 Routes</label>
                </div>
                <div class="control-group legend">
                    <h4>Route Type</h4>
                    <label><i style="background:#c2410c;"></i> Express Bus</label>
                    <label><i style="background:#1d4ed8; border-top: 2px dotted #1d4ed8; height: 2px;"></i> Private Transfer</label>
                    <label><i style="background:#16a34a;"></i> Train</label>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data points with approximate coordinates
        const locations = {
            hotels: [
                { lat: 38.7345, lng: -9.1535, name: "Hotel Olissippo Marqu칡s de S치", city: "Lisbon" },
                { lat: 39.6308, lng: -8.6755, name: "Aurea F치tima Hotel Congress & Spa", city: "F치tima" },
                { lat: 40.2155, lng: -8.4330, name: "Vila Gale Coimbra", city: "Coimbra" },
                { lat: 41.1370, lng: -8.6145, name: "Forte de Gaia, Autograph Collection", city: "Porto/Gaia" }
            ],
            concerts: [
                { lat: 38.7550, lng: -9.1585, name: "Aula Magna, University of Lisbon", city: "Lisbon" },
                { lat: 39.4795, lng: -8.5395, name: "Teatro Virg칤nia", city: "Torres Novas" }
            ]
        };

        // Updated travel routes, removing G칩is and adding a direct Coimbra-Porto leg
        const travelRoutes = [
            { from: { lat: 38.7345, lng: -9.1535 }, to: { lat: 39.6308, lng: -8.6755 }, label: "Lisbon to F치tima (Bus)", color: '#c2410c', dashed: false },
            { from: { lat: 39.6308, lng: -8.6755 }, to: { lat: 39.4795, lng: -8.5395 }, label: "F치tima to Torres Novas (Transfer)", color: '#1d4ed8', dashed: true },
            { from: { lat: 39.6308, lng: -8.6755 }, to: { lat: 40.2155, lng: -8.4330 }, label: "F치tima to Coimbra (Bus)", color: '#c2410c', dashed: false },
            { from: { lat: 40.2155, lng: -8.4330 }, to: { lat: 41.1370, lng: -8.6145 }, label: "Coimbra to Porto (Train)", color: '#16a34a', dashed: false }
        ];

        let map;
        const hotelMarkers = [];
        const concertMarkers = [];
        const routePolylines = [];
        let infoWindow;

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 39.8, lng: -8.5 },
                zoom: 7,
                mapTypeControl: false,
                streetViewControl: false,
            });

            infoWindow = new google.maps.InfoWindow();
            
            const hotelIcon = 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png';
            const concertIcon = 'http://maps.google.com/mapfiles/ms/icons/red-dot.png';

            // Create Hotel Markers
            locations.hotels.forEach(loc => {
                const marker = new google.maps.Marker({
                    position: { lat: loc.lat, lng: loc.lng },
                    map: map,
                    title: loc.name,
                    icon: hotelIcon
                });
                marker.addListener('click', () => {
                    infoWindow.setContent(`<b>${loc.name}</b><br>${loc.city}`);
                    infoWindow.open(map, marker);
                });
                hotelMarkers.push(marker);
            });

            // Create Concert Markers
            locations.concerts.forEach(loc => {
                const marker = new google.maps.Marker({
                    position: { lat: loc.lat, lng: loc.lng },
                    map: map,
                    title: loc.name,
                    icon: concertIcon
                });
                marker.addListener('click', () => {
                    infoWindow.setContent(`<b>${loc.name}</b><br>Concert Venue in ${loc.city}`);
                    infoWindow.open(map, marker);
                });
                concertMarkers.push(marker);
            });

            // Create Route Polylines
            travelRoutes.forEach(route => {
                const lineSymbol = {
                    path: 'M 0,-1 0,1',
                    strokeOpacity: 1,
                    scale: 4
                };
                const polyline = new google.maps.Polyline({
                    path: [route.from, route.to],
                    geodesic: true,
                    strokeColor: route.color,
                    strokeOpacity: route.dashed ? 0 : 1,
                    strokeWeight: 3,
                    icons: route.dashed ? [{
                        icon: lineSymbol,
                        offset: '0',
                        repeat: '20px'
                    }] : null,
                    map: map
                });
                 polyline.addListener('click', (event) => {
                    infoWindow.setContent(route.label);
                    infoWindow.setPosition(event.latLng);
                    infoWindow.open(map);
                });
                routePolylines.push(polyline);
            });
            
            setupControls();
        }

        function setupControls() {
            document.getElementById('toggle-hotels').addEventListener('change', (e) => toggleLayer(hotelMarkers, e.target.checked));
            document.getElementById('toggle-concerts').addEventListener('change', (e) => toggleLayer(concertMarkers, e.target.checked));
            document.getElementById('toggle-routes').addEventListener('change', (e) => toggleLayer(routePolylines, e.target.checked));
        }

        function toggleLayer(layer, isVisible) {
            layer.forEach(item => {
                item.setMap(isVisible ? map : null);
            });
        }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=&callback=initMap" async defer></script>
</body>
</html>
